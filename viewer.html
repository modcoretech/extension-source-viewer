<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>modcore CRX Viewer</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; }
  header { background:#20232a; color:white; padding:12px 20px; font-size:1.5em; display:flex; justify-content:space-between; align-items:center; }
  header button { background:#61dafb; border:none; padding:6px 12px; cursor:pointer; border-radius:4px; }
  header button:hover { background:#21a1f1; }

  #main { display:flex; height:calc(100vh - 50px); }
  #leftPanel { width:320px; background:#fff; border-right:1px solid #ccc; display:flex; flex-direction:column; }
  #fileControls { padding:10px; border-bottom:1px solid #ccc; }
  #fileTree { flex:1; overflow:auto; padding:10px; }
  #fileTree ul { list-style:none; padding-left:15px; }
  #fileTree li { cursor:pointer; padding:2px 4px; border-radius:3px; }
  #fileTree li:hover { background:#e0e0e0; }
  #fileTree li.selected { background:#61dafb; color:#fff; }

  #rightPanel { flex:1; display:flex; flex-direction:column; }
  #searchContainer { padding:10px; border-bottom:1px solid #ccc; display:flex; gap:5px; align-items:center; }
  #viewer { flex:1; overflow:auto; padding:10px; font-family:monospace; white-space:pre; background:#1e1e1e; color:#ddd; }

  /* Dark/light themes */
  body.light #viewer { background:#f5f5f5; color:#111; }
  body.light #fileTree li.selected { background:#21a1f1; color:#fff; }

  input[type="text"] { flex:1; padding:4px 6px; border-radius:4px; border:1px solid #ccc; }
  button.small { padding:4px 8px; font-size:0.9em; }
</style>
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet" />
</head>
<body>
<header>
  modcore CRX Viewer
  <button id="themeToggle">Toggle Theme</button>
</header>
<div id="main">
  <div id="leftPanel">
    <div id="fileControls">
      <input type="file" id="crxInput" accept=".crx">
      <button id="processBtn" class="small">Process File</button>
    </div>
    <div id="fileTree"><ul id="treeRoot"></ul></div>
  </div>
  <div id="rightPanel">
    <div id="searchContainer">
      <input type="text" id="searchBox" placeholder="Search files...">
      <button id="exportBtn" class="small">Export Selected</button>
    </div>
    <pre id="viewer" class="language-js">Upload a CRX file and press "Process File" to view source.</pre>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jszip@3.11.0/dist/jszip.min.js"></script>
<script src="viewer.js"></script>
</body>
</html>
